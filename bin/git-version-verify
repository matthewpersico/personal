#!/usr/bin/env perl

# git-version-verify - no .gitaudit, called on every prompt

use strict;
use warnings;

my @git_version_i = split( /\s+/, qx($ENV{REALGIT} --version) );
my @git_version   = split( /\./,  $git_version_i[-1] );
my @git_version_verified_i =
  split( /\s+/, $ENV{REALGIT_VERIFIED_VERSION_STRING} );
my @git_version_verified = split( /\./, $git_version_verified_i[-1] );

for my $index ( 0, 1, 2 ) {
    if ( $git_version[$index] != $git_version_verified[$index] ) {
        warn ">>> WARNING: $ARGV[0]: Verified against $git_version_verified_i[-1], but $git_version_i[-1] is installed.\n";
    }
}
exit 0;
