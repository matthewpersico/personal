#!/usr/bin/env bash

# all-usage
declare tgt
tgt=$1
if [[ "$1" =~ ^-+h ]]
then
    all_usage "$0"
    exit 0
fi

declare type
type=$(type "$tgt" 2>&1 | head -1 | grep -v 'not found')
if [ -z "$type" ]
then
    echo "$tgt not found"
elif [[ "$type" =~ 'is a function' ]]
then
    func-usage "$tgt"
else
    tgt=${type##$tgt is }
    script-usage "$tgt"
fi

exit 0
:<<'__PODUSAGE__'
=head1 NAME

all-usage - print the usage text of a script or function

=head1 SYNOPSIS

 all-usage <name>
 all-usage -h

=head1 DESCRIPTION

Call 'script-usage' on a script and 'func-usage' on a function. See the help
for each of those commands for detail about adding usage text to your code.

=head1 ARGUMENTS

=over 4

=item name

The script (on the PATH) or function name for which to print the usage info.

=back

=head1 OPTIONS

=over 4

=item -h

Print this help

=back

=cut

__PODUSAGE__
