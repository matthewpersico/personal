# -*- sh -*-

# mopbbgh_continue_devel

# Makes sure you incorporate any updates that happened while developing
# yesterday.

typeset current_branch=$(git_current_branch)
echo "Current branch is $current_branch"
resp=$(yesno "Work with this")
if [ "$resp" = 'n' ]
then
    echo "Ok. Switch branches. Bye."
    exit
fi

typeset gitst=$(git st --porcelain)
if [ -n "gitst" ]
then
    cmd="git stash"
    echo "Save in progress work ($cmd)..."
    $cmd
fi

cmd='git pull upstream master'
echo "Sync branch $current_branch from master ($cmd)..."
$cmd

if [ -n "gitst" ]
then
    cmd="git stash pop"
    echo "Restore in progress work ($cmd)..."
    $cmd
fi

git st

echo "Ok to begin your work day..."
