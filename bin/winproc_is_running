#!/usr/bin/env bash 

# winproc_is_running

# See if a process is running in Windows proc space

declare verbose=0
if [ "$1" = '-v' ]
then
verbose=1
shift
fi

declare procname=$1

procpid=$(/mnt/c/Windows/System32/wbem/WMIC.exe  process where "name='$procname'" get processid 2>/dev/null | tail -2 )
procpid="$(perl -e 'chomp $ARGV[0]; print $ARGV[0]+0' $procpid)"

if ((verbose))
then
echo "procpid='$procpid'"
fi

((procpid)) && exit 0 ## running
exit 1 ## not running
