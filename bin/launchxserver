#!/usr/bin/env bash

# launchxserver

## Yes this code is duped from profile, but this script is called from
## xterminit, which can be called before profile at Bloomberg.
if [ "$(uname -r | sed 's/.*\(Microsoft\).*/\1/')" = 'Microsoft' ]
then
    winhome=$(powershell.exe -command "& {cd 'HKCU:\\Volatile Environment\\'; Get-ItemPropertyValue  -Path. -NAME HOMEPATH}")
    # shellcheck disable=SC1117 # the backslashes will be fine in Windows process space.
    /mnt/c/Program\ Files/VcXsrv/xlaunch.exe -run "$winhome\local\bin\config.xlaunch"
fi
