#!/usr/bin/env perl
use strict;
use warnings;

use Getopt::Long;

my %opt= (delim => '\s+');

GetOptions(\%opt,
           "delim=s",
           "keep=s",
           "chuck=s");

die "Stupid, either keep or chuck but don't confuse things by trying to do both"
  if($opt{keep} and $opt{chuck});
die "Stupid, you gotta either keep or chuck, or else why bother?"
  if(not $opt{keep} and not $opt{chuck});

while (<>) {
    chomp;
    my @in = split(qr($opt{delim}));
    if($opt{keep}) {
        my @k = split(',', $opt{keep});
        print "@in[@k]\n";
    } else {
        my @c = split(',', $opt{chuck});
        @in[@c] = map { 'CHUCKME' } @c;
        print join(' ', grep { !m/CHUCKME/ } @in);
    }
}
