#!/usr/bin/env bash

# <Function Class: git>
# <Function Justification:  Efficiency - in PS1>

git-get-default-remote ()
{
    # NO_SHIM

    declare do_url=1
    if [[ $1 == --tag ]]
    then
        do_url=0
        shift
    fi

    local pre=$1;shift
    local post=$1;shift

    if git repo ina
    then
        if [ "$(git config --global push.default 2>/dev/null)" = 'simple' ]
        then
            declare current_branch
            current_branch=$(git branch --show-current)
            declare tag
            tag=$(git config --get branch."$current_branch".remote 2>/dev/null)
            declare out
            if ((do_url))
            then
                out=$(git config --get remote."$tag".url 2>/dev/null)
            else
                out="$tag"
            fi
            echo "${pre}${out}${post}"
        fi
    fi
}
