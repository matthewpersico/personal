# -*- sh -*-

# <Function Class: git>
# <Function Justification: none>

git-check-with-master ()
{
    echo "${FUNCNAME[0]} \"$@\" ## $(date +%Y%m%d%H%M%S)" >> ${TILDAE:-$HOME}/personal/data/funcsaudit ## This is audit
    ##@@ 0001||group||git-check-with-master||

    declare -A gitfuncs_remotes
    git-parse-remote-v
    ## clone-and-fork repos need to check with the master in the canonical
    ## upstream branch.  If there is no 'upstream', then it's probably a clone
    ## only, so check against the master in origin.
    if [ -n "${gitfuncs_remotes[upstream]}" ]
    then
        git-check-with-remote --remote upstream --branch master "$@"
    elif [ -n "${gitfuncs_remotes[origin]}" ]
    then
        git-check-with-remote --remote origin --branch master "$@"
    fi
    return $?
}
