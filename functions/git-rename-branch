# -*- sh -*-

# <Function Class: git

git-rename-branch ()
{
    echo "${FUNCNAME[0]} \"$@\" ## $(date +%Y%m%d%H%M%S)" >> ${HOME}/personal/data/funcsaudit ## This is audit
    ##@@ 0001||group||git-rename-branch||

    local usage_func="${FUNCNAME}-usage"

    if (($#!=2))
    then
        $usage_func
        return $NOT_OK
    fi

    local old_branch=$1; shift
    local new_branch=$1; shift
    if (($#))
    then
        $usage_func
        echo "       argument(s) '$*' are illegal"
        return $NOT_OK
    fi

    echo "git branch -m $old_branch $new_branch ..."
    git branch -m $old_branch $new_branch        || return $? # Rename branch locally.

    echo "git push origin --delete $old_branch ..."
    git push origin --delete $old_branch         || return $? # Delete the old
                                                              # branch. DON'T
                                                              # DO THIS IF YOU
                                                              # HAVE AN OPEN
                                                              # PULL REQUEST!!!

    echo "git push --set-upstream origin $new_branch"
    git push --set-upstream origin $new_branch                # Push the new
                                                              # branch, set
                                                              # local branch to
                                                              # track the new
                                                              # remote.
    return $?
}


