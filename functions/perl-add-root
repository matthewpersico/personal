# -*- sh -*-

# <Function Class: perl>
# <Function Justification: env mod>

perl-add-root ()
{
    echo "${FUNCNAME[0]} \"$@\" ## $(date +%Y%m%d%H%M%S)" >> ${TILDAE:-$HOME}/personal/data/funcsaudit ## This is audit
    local roottoadd=$1
    [ -z "$roottoadd" ] && roottoadd=${TILDAE:-$HOME}/perl
    roottoadd=$(realpath $roottoadd)

    ## Clean first in case they exist in the wrong order
    perl-del-root $roottoadd

    local pcv=$(perl-current-version)
    ## Remember, these are in reverse order of how they need to appear
    addpath -x -f -p PERL5LIB $roottoadd/share/perl5
    addpath -x -f -p PERL5LIB $roottoadd/share/perl5/site_perl
    addpath -x -f -p PERL5LIB $roottoadd/share/perl5/site_perl/$pcv
    addpath -x -f -p PERL5LIB $roottoadd/lib/perl5
    addpath -x -f -p PERL5LIB $roottoadd/lib/perl5/site_perl
    addpath -x -f -p PERL5LIB $roottoadd/lib/perl5/site_perl/$pcv
    addpath -x -f -p PERL5LIB $roottoadd/lib64/perl5
    addpath -x -f -p PERL5LIB $roottoadd/lib64/perl5/site_perl
    addpath -x -f -p PERL5LIB $roottoadd/lib64/perl5/site_perl/$pcv
    addpath -x -f -p PATH $roottoadd/bin
    addpath -x -f -p MANPATH $roottoadd/man

    perl-list-root ~roottoadd
}
