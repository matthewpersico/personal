# -*- sh -*-
# shellcheck disable=SC2148

# <Function Class: util>
# <Function Justification: uses $0>

script-echo ()
{
    [ "$1" = "-i" ] && CMD_ECHO_AS="${CMD_ECHO_AS:-${0}}" && export CMD_ECHO_AS && return 0
    cmd-echo -s "${CMD_ECHO_AS:-$0}" "$@"
}

return 0 ## PODUSAGE guard

:<<'__PODUSAGE__'
=head1 NAME

  script-echo - label echos in scripts with the command name

=head1 SYNOPSIS

 script-echo -i ## somewhere near the top of your program.

 script-echo [--head] [--title] [-n] [-c] -- "text" ["text"...]

=head1 DESCRIPTION

Call 'script-echo' to print the first "text" on a line with a reversed-color
prefix containing the command name. Print subsequent lines indented with
reversed color spaces, indicating continuation.

The name to print is determined as either the envar CMD_ECHO_AS or $0.

You should call 'script-echo' in only in scripts. Calling 'script-echo' in a
function could pollute the environment.

Furthermore, if you are calling functions in your scripts that themselves call
'func-echo', you need to stop 'func-echo' from trying to set CMD_ECHO_AS
itself. Putting this command

 script-echo -i

in your script before any function calls will immediately set the CMD_ECHO_AS
envvar if it has not already been set.

=head1 OPTIONS

=item --

Indicates end of options to 'script-echo', so that all subsequent arguments are
taken as text to print. Technically not necessary UNLESS your first argument to
print happens to match one of the options to 'script-echo'.

=item --head

Print a blank line for spacing before printing any text.

=item --title

Print a blank line for spacing before printing any text and then print the
entire first text line as reversed, not just the command name.

=item -n

Do not print a new line at the end of each line.

=item -c

Print the first "text" element as a continuation line.

=back

=head1 Environment Variable

__PODUSAGE__

#  LocalWords:  funcname shellcheck util func
